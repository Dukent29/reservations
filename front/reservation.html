<!DOCTYPE html>
<html lang="en" class="hotel-app">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Kotan Voyages — Hotel Search (Sandbox)</title>
  <link rel="stylesheet" href="public/style.css" />
</head>
<body>
<div class="app-shell">

<header class="app-header">
  <div class="brand">
    <p class="eyebrow">Kotan Voyages · RateHawk sandbox</p>
    <h1>
      B2B hotel console
      <span class="badge">internal</span>
    </h1>
    <p class="sub">Search, review details, and debug bookings in one workspace.</p>
  </div>
  <div class="header-actions">
    <label class="language-switch" for="language">
      <span>Language</span>
      <select id="language">
        <option value="en" selected>English</option>
        <option value="fr">Français</option>
      </select>
    </label>
  </div>
</header>

<main class="workspace">
  <div class="search-shell full">
    <section class="card searchbar">
        <div class="search-grid">
          <div class="field field--suggestions" data-suggestions-root>
            <label for="region_id">Destination</label>
            <input
              id="region_id"
              type="text"
              placeholder="Try Paris, Rome, Dubai..."
              autocomplete="off"
              aria-describedby="destinationHelp regionStatus"
              aria-haspopup="listbox"
              aria-expanded="false"
            />
            <small id="destinationHelp" class="muted" style="font-size:.7rem;">Type a city or ETG region; we’ll autocomplete it.</small>
            <small id="regionStatus" class="muted" style="font-size:.7rem;"></small>
            <div id="suggestionsDropdown" class="suggestions-dropdown hidden" role="listbox" aria-label="Destination suggestions"></div>
          </div>
          <div class="field">
            <label for="checkin">Check-in</label>
            <input id="checkin" type="date" />
          </div>
          <div class="field">
            <label for="checkout">Check-out</label>
            <input id="checkout" type="date" />
          </div>
          <div class="field compact" style="position:relative;">
            <label for="guestsSummary">Guests</label>
            <button id="btnGuests" class="secondary" style="text-align:left;">
              <span id="guestsSummary">2 adults · 0 children</span>
            </button>
          </div>
          <div class="field compact">
            <label for="currency">Currency</label>
            <select id="currency">
              <option value="EUR" selected>EUR</option>
              <option value="USD">USD</option>
            </select>
          </div>
          <div class="field action">
            <label>&nbsp;</label>
            <button id="btnSearch" class="primary">Search</button>
          </div>
        </div>

        <details class="extras">
          <summary>Advanced search</summary>
          <div class="extras-grid">
            <div class="field">
              <label>Search mode</label>
              <div class="radio-row">
                <label><input type="radio" name="mode" value="region" checked /> Region</label>
                <label><input type="radio" name="mode" value="geo" /> Geo (lat/lon)</label>
              </div>
            </div>
            <div class="field" id="regionBlock">
              <small style="color:#94a3b8;font-size:.7rem;">Uses region_id field above</small>
            </div>
            <div class="field" id="geoBlock" style="display:none;">
              <div class="geo-grid">
                <div>
                  <label for="latitude">Latitude</label>
                  <input id="latitude" type="number" step="0.000001" placeholder="48.8566" />
                </div>
                <div>
                  <label for="longitude">Longitude</label>
                  <input id="longitude" type="number" step="0.000001" placeholder="2.3522" />
                </div>
                <div>
                  <label for="radius">Radius (m)</label>
                  <input id="radius" type="number" min="100" max="5000" value="1500" />
                </div>
              </div>
            </div>
          </div>
        </details>

        <!-- FILTERS UI -->
        <div class="filters">
          <div class="filter-group">
            <p class="filter-title">Star rating</p>
            <div class="filter-options">
              <label><input type="checkbox" class="flt-stars" value="2"> 2★</label>
              <label><input type="checkbox" class="flt-stars" value="3"> 3★</label>
              <label><input type="checkbox" class="flt-stars" value="4"> 4★</label>
              <label><input type="checkbox" class="flt-stars" value="5"> 5★</label>
            </div>
          </div>

          <div class="filter-group">
            <p class="filter-title">Meal plan</p>
            <div class="filter-options">
              <label><input type="checkbox" class="flt-meal" value="nomeal"> RO</label>
              <label><input type="checkbox" class="flt-meal" value="breakfast"> BB</label>
              <label><input type="checkbox" class="flt-meal" value="half_board"> HB</label>
              <label><input type="checkbox" class="flt-meal" value="full_board"> FB</label>
              <label><input type="checkbox" class="flt-meal" value="all_inclusive"> AI</label>
            </div>
          </div>

          <div class="filter-group">
            <p class="filter-title">Policies</p>
            <label class="checkbox-inline">
              <input type="checkbox" id="flt_free_cancel"> Free cancellation only
            </label>
          </div>
        </div>
    </section>
  </div>

  <section class="workspace__content">
    <div class="results-grid">
      <div class="card results-card">
        <h3>
          Search results
          <span id="searchMeta" style="color:#64748b;font-size:.7rem;font-weight:400;"></span>
        </h3>
        <div id="hotelsContainer" class="hotel-list">
          <div style="font-size:.7rem;color:#64748b;">No results yet. Do a search</div>
        </div>
        <div id="resultsPagination" class="pagination" style="display:none;">
          <button id="btnResultsPrev" class="secondary mini" type="button">Previous</button>
          <span id="resultsPaginationLabel">Page 1 / 1</span>
          <button id="btnResultsNext" class="secondary mini" type="button">Next</button>
        </div>
      </div>

      <div class="card details-card">
        <h3>
          <span id="hotelDetailHeaderTitle">Hotel details & rates</span>
          <span id="hotelDetailHeaderHint" style="color:#64748b;font-size:.7rem;font-weight:400;">select a hotel</span>
        </h3>
        <div id="hotelDetails">
          <div id="hotelDetailsPlaceholder" style="font-size:.7rem;color:#64748b;">No hotel selected.</div>
        </div>
      </div>
    </div>

    <div class="card log-card">
      <h3>
        Debug / Log output
        <span style="color:#64748b;font-size:.7rem;font-weight:400;">for dev only</span>
      </h3>
      <pre id="logOutput">// logs will show here</pre>
    </div>
  </section>
</main>

</div>

<!-- Guests small modal -->
<div id="guestModal" class="modal hidden" aria-hidden="true" role="dialog" aria-modal="true">
  <div class="modal__backdrop"></div>
  <div class="modal__dialog" style="width:min(360px,92vw)">
    <div class="modal__header">
      <div class="modal__title">Guests</div>
      <button id="guestClose" class="secondary mini" aria-label="Close">✕</button>
    </div>
    <div class="modal__body" style="gap:1rem;">
      <div>
        <label style="font-size:.75rem;color:#cbd5e1;">Adults</label>
        <div class="counter">
          <button type="button" id="adultDec">−</button>
          <div class="value" id="adultValue">2</div>
          <button type="button" id="adultInc">+</button>
        </div>
      </div>
      <div>
        <label style="font-size:.75rem;color:#cbd5e1;">Children</label>
        <input id="childrenCount" type="number" min="0" max="8" value="0" />
        <div id="childAges" class="ages-grid" style="margin-top:.5rem;"></div>
        <small class="muted">Ages 0–17 when children present.</small>
      </div>
    </div>
    <div class="modal__footer">
      <button id="guestsDoneModal" class="primary">Done</button>
    </div>
  </div>
</div>

<script src="reservation.js" type="module"></script>
</body>
</html>
